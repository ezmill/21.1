function map_range(e,t,n,r,i){return r+(i-r)*(e-t)/(n-t)}function componentToHex(e){var t=e.toString(16);return t.length==1?"0"+t:t}function rgbToHex(e,t,n){return"#"+componentToHex(e)+componentToHex(t)+componentToHex(n)}function map_range(e,t,n,r,i){return r+(i-r)*(e-t)/(n-t)}function doSort(e){var t=document.createElement("canvas");document.body.appendChild(t);t.width=window.innerWidth;t.height=window.innerHeight;rasterizeHTML.drawHTML('<div style="position: absolute; top: 0px; left: 0px; background:'+e+"; width:"+"100%"+"; height:"+"100%"+';">'+'Some <span style="color: green">HTML</span>'+" with an image"+"</div>",t,dangus(t))}function dangus(e){var t=new Image;var n=e.toDataURL();t.src=n;t.onload=function(){function u(){var t=n.getImageData(0,0,e.width,e.height);copyData=t.data;for(var r=0;r<o;r++){for(var i=0;i<s;i++){var a=(r*s+i)*4;var f=a;var l=a+1;var c=a+2;if(a%1e5===0){determineRand()}if(copyData[a+4]>copyData[a]){swap(copyData,f,f-4*s-4,l,l-4*s+4,c,c-4*s-4,rand)}}}n.putImageData(t,0,0);window.requestAnimationFrame(u)}var n=e.getContext("2d");n.drawImage(t,0,0,e.width,e.height);var r=n.getImageData(0,0,e.width,e.height);var i=r.data;var s=e.width,o=e.height;n.putImageData(r,0,0);window.requestAnimationFrame(u)}}function determineRand(){rand=Math.floor(Math.random()*3)}function swap(e,t,n,r,i,s,o,u){switch(u){case 0:var a=e[t]-255;e[t]=e[n]-255;e[n]=a-255;var f=e[r];e[r]=e[i];e[i]=f;var l=e[s];e[s]=e[o];e[o]=l;break;case 1:var a=e[t];e[t]=e[n];e[n]=a;var f=e[r]-255;e[r]=e[i]-255;e[i]=f-255;var l=e[s];e[s]=e[o];e[o]=l;break;case 2:var a=e[t];e[t]=e[n];e[n]=a;var f=e[r];e[r]=e[i];e[i]=f;var l=e[s]-255;e[s]=e[o]-255;e[o]=l-255;break}}function gradientCanvas(e,t,n,r,i){var e=e*(Math.PI/180);var s=document.createElement("canvas");document.body.appendChild(s);s.width=window.innerWidth;s.height=window.innerHeight;var o=s.getContext("2d");var u=Math.abs(Math.sin(e)*s.width);var a=Math.abs(Math.cos(e)*s.height);console.log(u,a);var f=o.createLinearGradient(0,0,u,a);f.addColorStop(0,t);f.addColorStop(.5,n);f.addColorStop(1,r);o.fillStyle=f;o.fillRect(0,0,s.width,s.height);dangus(s)}function getCol(e,t){var n=(Math.floor(t)*(window.innerWidth+1)+Math.floor(e))*4;var r={r:copyData[n+0],g:copyData[n+1],b:copyData[n+2],a:copyData[n+3]};return(r.r<<16)+(r.g<<8)+r.b}function getBri(e,t,n){return.34*e+.5*t+.16*n}var div=document.getElementById("main");var hammertime=new Hammer(div);var span=document.getElementsByClassName("slide-text");console.log(span);var sort=document.getElementById("sort");var angle=0;var cos=Math.cos(angle);hammertime.on("drag",function(e){e.gesture.preventDefault();span[0].style.display="none";var t=e.gesture.touches[0].clientX;var n=e.gesture.touches[0].clientY;var r=(e.gesture.velocityX+e.gesture.velocityY)/2;var i=Math.floor(map_range(t,0,window.innerWidth,0,255));var s=Math.floor(map_range(n,0,window.innerHeight,0,255));var o=Math.floor(map_range(e.gesture.angle,-180,180,0,255));var u=Math.floor(Math.random()*255);var a=rgbToHex(i,s,o);var f=rgbToHex(s,o,i);var l=rgbToHex(o,i,s);var c=Math.acos(t/window.innerWidth);var h=Math.acos(n/window.innerHeight);var p=c*(180/Math.PI);var d=h*(180/Math.PI);var v=(p+d)/2;this.style.background="linear-gradient("+e.gesture.angle+"deg"+", "+a+", "+f+", "+l+")";sort.onclick=function(t){t.preventDefault();console.log(e.gesture);div.style.background="none";gradientCanvas(e.gesture.angle,a,f,l,e.gesture)}},false)